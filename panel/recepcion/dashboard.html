
<!DOCTYPE html>
<html lang='es'>
<head>
  <meta charset='UTF-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1.0'/>
  <title>Recepción - Laboratorio Care</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #f4f6f9; }
    .header { background: #003366; color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
    .container { max-width: 900px; margin: 20px auto; padding: 20px; }
    .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
    input, button { padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; width: 100%; }
    button { background: #003366; color: white; cursor: pointer; }
    .logout { background: #d9534f; }
  </style>
</head>
<body>
  <div class='header'>
    <h2>Recepción / Caja</h2>
    <button class='logout' onclick='logout()'>Cerrar Sesión</button>
  </div>

  <div class='container'>
    <div class='card'>
      <h3>Registrar Paciente</h3>
      <input type='text' id='nombre' placeholder='Nombre completo' />
      <input type='date' id='fechaNac' />
      <input type='text' id='medico' placeholder='Médico solicitante' />
      <button onclick='registrarPaciente()'>Registrar Paciente</button>
    </div>

    <div class='card'>
      <h3>Buscar Paciente</h3>
      <input type='text' id='folio' placeholder='Folio del paciente' />
      <button onclick='buscarPaciente()'>Buscar</button>
    </div>
  </div>

  <script>
    function logout() {
      localStorage.clear();
      window.location.href = '../login.html';
    }

    async function registrarPaciente() {
      const nombre = document.getElementById('nombre').value;
      const fechaNac = document.getElementById('fechaNac').value;
      const medico = document.getElementById('medico').value;

      const token = localStorage.getItem('authToken');
      const response = await fetch('https://laboratorio-backend-e00k.onrender.com/api/pacientes', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer ' + token
        },
        body: JSON.stringify({
          nombreCompleto: nombre,
          fechaNacimiento: fechaNac,
          medicoSolicita: medico,
          sucursalId: 1
        })
      });

      if (response.ok) {
        alert('Paciente registrado con éxito');
      } else {
        const error = await response.json();
        alert('Error: ' + error.error);
      }
    }

    function buscarPaciente() {
      const folio = document.getElementById('folio').value;
      window.open(https://castdandc.github.io/laboratorio-frontend/?folio=\, '_blank');
    }
  </script>
</body>
</html>

